\documentclass{beamer}
\usetheme[navigation]{UMONS}
\usepackage[utf8]{inputenc}

\title[Predicting ARBs]{Predicting aging-related bugs using software complexity metrics}
\author[B.Jason]{Jason \textsc{Bury}}
\institute[]{%
 Faculté des Sciences\\
  Université de Mons
  \\[2ex]
  \includegraphics[height=4ex]{figures/UMONS}\hspace{2em}%
  \raisebox{-1ex}{\includegraphics[height=6ex]{figures/UMONS_FS}}
}

\begin{document}
\maketitle
\section{Introduction}
\subsection{Aging-related bugs}

\begin{frame}
 \frametitle{Aging-Related Bugs}
 \framesubtitle{Mandelbug}
 If
 \begin{itemize}
  \item A time lag between the fault activation and the failure occurence.
  \item Bug influenced by timing of operations or order of operations or environment interactions.
 \end{itemize}
 \vspace{1cm}
 \begin{tabular}{lll}
  Then & $\Longrightarrow$ & \emph{Mandelbug}\\
  Else & $\Longrightarrow$ & \emph{Bohrbugs}
 \end{tabular}
\end{frame}
% A bohrbugs can thus be easily isolated

\begin{frame}
 \frametitle{Aging-Related Bugs}
 \framesubtitle{Aging-related mandelbug}
 If Mandelbug and\\
 \vspace{1cm}
 Causes the accumulation of internal error states
 \begin{center}
  \large Or \normalsize
 \end{center}
 The running time increase the risk of the bug activation/propagation\\
 \vspace{1cm}
 Then $\Longrightarrow$ \emph{Aging-related Mandelbug}\\
 \small Also called \emph{Aging-related bug} or \alert{ARB}.\normalsize
\end{frame}

\begin{frame}
 \frametitle{Aging-Related Bugs}
 \framesubtitle{Examples}
 \begin{exampleblock}{What can causes an ARB ?}
  \begin{itemize}
   \item Numerical error due to rounding or imprecision accrue over time
   \item A malloc() without free()
   \item A queue continuously increased
   \item Size of ressource exceeded
   \item ...
  \end{itemize}
 \end{exampleblock}
\end{frame}

\subsection{How to detect}
\begin{frame}
 \frametitle{How can we detect them ?}
 short answer: \alert{Select metrics then use a classifier !}\\
 But still questions to do that:\\
 \begin{block}{Questions}
  \begin{itemize}
   \item Which metrics to use ?
   \item Which classifier to use ?
   \item Does it works ?
   \item will be the classifier effective for all projects ?
  \end{itemize}
 \end{block}
\end{frame}

\section{Metrics}
\subsection{Metrics to use}
\begin{frame}
 \frametitle{Which metrics to use ?}
 Metrics correlated with bug density:
 \begin{itemize}
  \item LOC : The number of lines of code
  \item CC  : The McCabes's cyclomatic complexity
  \item Halstead metrics %TODO est quoi ca ?
 \end{itemize}
\end{frame}

\begin{frame}
 \frametitle{Which metrics to use ?}
 \framesubtitle{New metrics} %TODO un par slide avec exemples
 New metrics related to memory usage, the \alert{ARMs}:
 \begin{itemize}
  \item \emph{AllocOps} : Number of instruction about allocation of memory (malloc)
  \item \emph{DeallocOps} : Number of instruction about Deallocation of memory (free)
  \item \emph{DerefSet} : Number of times a pointer variable is dereferenced to read%expliquer
  \item \emph{DerefUse} : Number of times a pointer variable is dereferenced to write
  \item \emph{UniqueDerefSet} : Same as DerefSet but variable counted one time per file
  \item \emph{UniqueDerefUse} : Same as DerefUse but variable counter one time per file
 \end{itemize}
\end{frame}
% We introduce metrics related to memory usage because we noticed that lot of ARB are about memory leaks

\section{Classifiers}
\subsection{Results without new metrics}
\begin{frame}
 \frametitle{Tried classifiers} %TODO montrer la gueule que ça a
 \begin{itemize}
  \item Naive Bayes (NB)
  \item Bayesian networks (BayesNet)
  \item Decision trees (DecTree)
  \item Logistic regression (Logistic)
 \end{itemize}
\end{frame}

\begin{frame}
 \frametitle{Results without new metrics}
 \framesubtitle{Terminology}
 $$PD = \text{Probability of detection} = \frac{\text{true positives}}{\text{true positives + false negatives}} . 100\%$$
 \vspace{0.3cm}
 $$PF = \text{Probability of false alarms} = \frac{\text{false positives}}{\text{true negatives + false positives}} . 100\%$$
 \vspace{0.3cm}
 $$Bal = Balance = 100 - \frac{\sqrt{(0-PF)^2 + (100-PD)^2}}{\sqrt{2}}$$
 \begin{center}
  \begin{tabular}{ll}
   log : & metrics at a logarithmic scale
  \end{tabular}
 \end{center}
\end{frame}
%Probability of detection is the probability that a ARB-prone module will be classified as ARB-prone
%Probability of false alamrs is the probability that a non-ARB-prone module is erroneously identified as ARB-prone
%A classifier with a high PD can also have a high PF (imagine a classifier that always answer 'yes') So balance is a trade-off

\begin{frame}
 \frametitle{Results without new metrics}
 \framesubtitle{Linux}
 \begin{center}
 \begin{tabular}{lrrr}
  \hspace{0.2cm} Classifier & PD & PF & Bal\\
  \hline
  NB & 60.13 & 12.46 & \textbf{69.24}\\
  NB + log &  \textbf{92.33} & \textbf{37.09} & \textbf{72.28}\\
  BayesNet & 3.72 & 1.85 & 31.91\\
  BayesNet + log & 5.34 & 1.95 & 33.06\\
  DectTree & 0.00 & 0.03 & 29.30\\
  DectTree + log & 0.00 & 0.00 & 29.30\\
  Logistic & 1.00 & 0.63 & 30.01\\
  Logistic + log & 3.84 & 0.62 & 32.01\\
  \hline
 \end{tabular}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Results without new metrics} %TODO change section: intro, metrics, choix classifier, attribute selection, avec new metrics, cross
 \begin{center}
  $\Longrightarrow$ \alert{Select the Naive Bayes classifier with metrics at a logarithmic scale.}
 \end{center}
 \vspace{1cm}
 High probability of detection but high probability of false alarm.\\
 Still useful for V\&V process:
 \begin{center}
  \alert{avoids to inspect the files classified as non-ARB !}
 \end{center}
\end{frame}

\subsection{Impact of attribute selection}
% TODO expliquer ce qu'on calcule. le gain d'info là et qu'on utilise un test a alpha=0.5 pour verifier qui est mieux
\begin{frame}
 \frametitle{Impact of attribute selection}
 \framesubtitle{Linux}
 \begin{center}
  \includegraphics[width=\textwidth]{figures/attributesLinux.png}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Impact of attribute selection}
 \framesubtitle{MySQL}
 \begin{center}
  \includegraphics[width=\textwidth]{figures/attributesMysql.png}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Impact of attribute selection}
 \framesubtitle{CARDAMOM}
 \begin{center}
  \includegraphics[width=\textwidth]{figures/attributesCardamom.png}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Impact of attribute selection}
 \begin{itemize}
  \item Top metrics not the same
  \item Need about 5 top metrics
  \item With all metrics, nearly the same results than with 5
 \end{itemize}
 \vspace{0.5cm}
 \begin{center}
  $\Longrightarrow$ \alert{We keep the full set of metrics.}
 \end{center}
\end{frame}

\subsection{Results with new metrics}
\begin{frame}
 \frametitle{Results with new metrics}
 \framesubtitle{Linux}
 \begin{center}
 \begin{tabular}{lrrr}
  \hspace{0.2cm} Classifier & PD & PF & Bal\\
  \hline
  NB & 60.13 & 12.46 & 69.24\\
  NB + log &  \textbf{92.33} & \textbf{37.09} & 72.28\\
  NB + ARMs & 58.13 & 11.88 & 68.34\\
  NB + log + ARMs & \textbf{93.56} & 35.90 & \textbf{73.25}\\
  \hline
 \end{tabular}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Results with new metrics}
 \framesubtitle{MySQL}
 \begin{center}
 \begin{tabular}{lrrr}
  \hspace{0.2cm} Classifier & PD & PF & Bal\\
  \hline
  NB & 49.14 & 10.46 & 63.02\\
  NB + log &  \textbf{88.30} & \textbf{34.67} & 73.53\\
  NB + ARMs & 48.42 & 10.06 & 62.61\\
  NB + log + ARMs & \textbf{88.37} & 32.99 & \textbf{74.69}\\
  \hline
 \end{tabular}
 \end{center}
\end{frame}

\begin{frame}
 \frametitle{Results with new metrics}
 \framesubtitle{CARDAMOM}
 \begin{center}
 \begin{tabular}{lrrr}
  \hspace{0.2cm} Classifier & PD & PF & Bal\\
  \hline
  NB & 0.00 & 7.18 & 29.08\\
  NB + log & 54.50 & \textbf{25.15} & 53.25\\
  NB + ARMs & 0.00 & 6.57 & 29.12\\
  NB + log + ARMs & \textbf{68.00} & 10.22 & \textbf{70.32}\\
  \hline
 \end{tabular}
 \end{center}
\end{frame}

\section{cross-project classification}
\subsection{cross-project}
\begin{frame}
 \frametitle{Cross-project classification}
 \alert{Can those classifiers predict ARB for another project ?}\\
 Results of classifier when the training set comes from another project than the test set:
 \begin{center}
 \begin{tabular}{l|r r r|r r r|r r r}
  Train & \multicolumn{3}{c}{Linux} & \multicolumn{3}{c}{MySQL} & \multicolumn{3}{c}{CARDAMOM}\\
  ~ & PD & PF & Bal & PD & PF & Bal & PD & PF & Bal\\
  \hline
  Linux & - & - & - & 82.9 & 23.8 & 79.3 & 0.0 & 0.2 & 29.3\\
  MySQL & 100.0 & 50.7 & 64.2 & - & - & - & 33.3 & 11.8 & 52.1\\
  CARDA & 0.0 & 0.1 & 29.3 & 0.0 & 0.6 & 29.3 & - & - & -\\
  \hline
 \end{tabular}
 \end{center}
 Low performance due to their different caracteristics.
 \begin{center}
  (CARDAMOM in pure C++, MySQL in mixed C/C++, Linux in pure C)
 \end{center}
\end{frame}
%The language is not the only different caracteristics of course.
\end{document}